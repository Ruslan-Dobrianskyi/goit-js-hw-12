{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/img/false.svg","../src/img/warning.svg","../src/img/true.svg","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '42729601-bb8f3cd30c047f14b18874640';\n\nexport async function getPhotos(q, page) {\n  const params = {\n    key: API_KEY,\n    page,\n    per_page: 15,\n    q,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  };\n\n  const res = await axios.get(`${BASE_URL}/`, { params });\n\n  return res.data;\n}\n","// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\nexport const lightbox = new SimpleLightbox('.photos-list a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nfunction renderPhoto({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return `\n        <li class=\"photos__item\">\n          <a\n            class=\"photos__link\"\n            href=\"${largeImageURL}\"\n          >\n            <img\n              class=\"photos__image\"\n              src=\"${webformatURL}\"\n              alt=\"${tags}\"\n              \n            />\n          </a>\n         <span class=\"photos-info\">\n            <p class=\"text-center\">Likes <span class=\"photos-text\">${likes}</span></p>\n            <p class=\"text-center\">Views <span class=\"photos-text\">${views}</span></p> \n            <p class=\"text-center\">Comments <span class=\"photos-text\">${comments}</span></p>\n            <p class=\"text-center\">Downloads <span class=\"photos-text\">${downloads}</span></p>\n         </span>\n        </li>\n      `;\n}\n\nfunction renderPhotos(arr) {\n  return arr.map(renderPhoto).join('');\n}\n\nexport function renderMarkup(photoEl, arr) {\n  photoEl.insertAdjacentHTML('beforeend', renderPhotos(arr));\n  lightbox.refresh();\n}\n","export default \"__VITE_ASSET__6a432e30__\"","export default \"__VITE_ASSET__79ae74dc__\"","export default \"__VITE_ASSET__1b499776__\"","// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { getPhotos } from './js/pixabay-api';\nimport { renderMarkup } from './js/render-functions';\nimport falseSvg from './img/false.svg';\nimport warningSvg from './img/warning.svg';\nimport trueSvg from './img/true.svg';\n\nconst formEl = document.querySelector('.js-hero-form');\nconst photoEl = document.querySelector('.photos-list');\nconst loaderEl = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.js-load-more-btn');\n\nlet page = 1;\nlet userSearch;\nconst perPage = 15;\nlet photoHeight;\n\nloadMoreBtn.addEventListener('click', async e => {\n  showLoader();\n  page += 1;\n  const data = await getPhotos(userSearch, page);\n  renderMarkup(photoEl, data.hits);\n\n  const lastPage = Math.ceil(data.totalHits / perPage);\n\n  if (page === lastPage) {\n    loadMoreBtnHide();\n    iziToast.error({\n      messageColor: '#fff',\n      backgroundColor: '#ef4040',\n      iconUrl: falseSvg,\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n  }\n\n  hideLoader();\n\n  const slowlyPhoto = document.querySelector('.photos__image');\n  photoHeight = slowlyPhoto.getBoundingClientRect().height;\n  window.scrollBy({\n    top: 2 * photoHeight,\n    behavior: 'smooth',\n  });\n});\n\nformEl.addEventListener('submit', async e => {\n  e.preventDefault();\n\n  photoEl.innerHTML = '';\n  page = 1;\n\n  userSearch = e.target.elements.query.value.trim();\n  if (userSearch === '') {\n    loadMoreBtnHide();\n    iziToast.warning({\n      titleColor: '#fff',\n      messageColor: '#fff',\n      backgroundColor: '#ffa000',\n      iconUrl: warningSvg,\n      message: 'Please enter a search query',\n      position: 'topRight',\n    });\n\n    return;\n  }\n\n  showLoader();\n  try {\n    const data = await getPhotos(userSearch, page);\n    if (data.hits.length === 0) {\n      hideLoader();\n      loadMoreBtnHide();\n      iziToast.error({\n        titleColor: '#fff',\n        messageColor: '#fff',\n        backgroundColor: '#ef4040',\n        iconUrl: falseSvg,\n        message:\n          'Sorry, there are no images matching<br> your search query. Please try again!',\n        position: 'topRight',\n      });\n      e.target.reset();\n      return;\n    }\n\n    if (data.totalHits > perPage) {\n      loadMoreBtnShow();\n    }\n\n    iziToast.success({\n      titleColor: '#fff',\n      messageColor: '#fff',\n      backgroundColor: '#28a745',\n      message: `We found ${data.totalHits} images.`,\n      iconUrl: trueSvg,\n      position: 'topRight',\n    });\n\n    renderMarkup(photoEl, data.hits);\n  } catch (error) {\n    console.error(error);\n  }\n\n  hideLoader();\n\n  e.target.reset();\n});\n\nfunction showLoader() {\n  loaderEl.classList.add('visible');\n}\n\nfunction hideLoader() {\n  loaderEl.classList.remove('visible');\n}\n\nfunction loadMoreBtnShow() {\n  loadMoreBtn.classList.remove('is-hidden');\n}\n\nfunction loadMoreBtnHide() {\n  loadMoreBtn.classList.add('is-hidden');\n}\n"],"names":["BASE_URL","API_KEY","getPhotos","q","page","params","axios","lightbox","SimpleLightbox","renderPhoto","webformatURL","largeImageURL","tags","likes","views","comments","downloads","renderPhotos","arr","renderMarkup","photoEl","falseSvg","warningSvg","trueSvg","formEl","loaderEl","loadMoreBtn","userSearch","perPage","photoHeight","e","showLoader","data","lastPage","loadMoreBtnHide","iziToast","hideLoader","loadMoreBtnShow","error"],"mappings":"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"}